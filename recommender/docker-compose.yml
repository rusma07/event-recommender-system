services:
  opensearch:
    image: opensearchproject/opensearch:2
    environment:
      discovery.type: "single-node"
      plugins.security.disabled: "true"   # <â€” this is the supported key
      OPENSEARCH_JAVA_OPTS: "-Xms1g -Xmx1g"
      DISABLE_INSTALL_DEMO_CONFIG: "true" # keep demo script off
    ulimits: { memlock: { soft: -1, hard: -1 } }
    volumes:
      - opensearch_data:/usr/share/opensearch/data
    ports: [ "9200:9200", "9600:9600" ]

  dashboards:
    image: opensearchproject/opensearch-dashboards:2
    environment:
      OPENSEARCH_HOSTS: '["http://opensearch:9200"]'
      DISABLE_SECURITY_DASHBOARDS_PLUGIN: "true"
    depends_on: [ opensearch ]
    ports: [ "5601:5601" ]

volumes:
  opensearch_data:
